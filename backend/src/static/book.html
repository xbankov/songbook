<!-- book_template.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Songbook</title>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var tocPlaceholder = document.getElementById("tableOfContents");
        var songs = document.querySelectorAll(".song h1"); // Assuming each song has an h1 element as its title

        // Create the table of contents
        var tocHtml = "<h2>Table of Contents</h2><ul>";
        songs.forEach(function (song, index) {
          tocHtml +=
            '<li><a href="#song' +
            (index + 1) +
            '">' +
            song.textContent +
            "</a></li>";
        });
        tocHtml += "</ul>";

        // Replace the placeholder with the generated TOC
        tocPlaceholder.innerHTML = tocHtml;
      });
    </script>
  </head>

  <body>
    <div id="tableOfContents">
      <!-- This is a placeholder for the table of contents -->
    </div>
    <div class="songbook">
      {% for song_file in songs %}
      <div class="song" id="song{{ loop.index }}">{% include song_file %}</div>
      {% endfor %}
    </div>
  </body>
</html>
